# Архитектура компонентов (Component Design) — Batumi Trip

## Иерархия компонентов
* **Layout** (глобальный макет)
  ├─ **Header** (навигационная панель с логотипом/названием и кнопкой авторизации)
  ├─ **LoginModal** (всплывающее окно авторизации)
  ├─ **Основная часть страницы (Main Content)**
      ├─ **LocationListPage** (главная страница со списком локаций и поиском)
      │    ├─ **SearchBar** (компонент поиска по заголовку и тегу)
      │    ├─ **AddLocationButton** (кнопка перехода к форме добавления локации)
      │    └─ **LocationList** (контейнер для списка карточек локаций)
      │        ├─ **LocationCard** (карточка локации для каждой записи)
      │        │  └─ **TagBadge** (отдельный компонент для отображения тега внутри карточки)
      │        └─ **SkeletonCard** (скелетон-заглушка при загрузке списка)
      ├─ **LocationDetailPage** (страница детальной информации о выбранной локации)
      │    ├─ **LocationDetail** (компонент отображения полной информации локации)
      │    │  └─ **TagBadge** (список тегов локации)
      │    ├─ **EditButton** (кнопка редактирования локации)
      │    └─ **DeleteButton** (кнопка удаления локации)
      └─ **AddLocationPage** (страница формы добавления локации)
          └─ **LocationForm** (компонент формы для создания/редактирования локации)

---
## Описание компонентов в очереди на раелизацию (Актуальный код: *ещё не рализован*)

---
## Пользовательские хуки и глобальное состояние

### useDeleteLocation

* **Назначение:** Мутация для удаления локации.
* **Функционал:**
  * `useMutation(id => DELETE /rest/v1/locations?id=eq.{id})`.
  * Удаляет связанные избранные: `DELETE /rest/v1/favourites?location_id=eq.{id}`.
  * Инвалидирует `['locations']`, `['favourites', userId]` и очищает `favorites` в Zustand.
* **Использование:** `DeleteButton` на `LocationDetailPage`; после успеха выполняет `router.push('/')`.
**Актаульный код useDeleteLocation:** *Ещё не рализован*

### useToggleFavourite

* **Назначение:** Мутация‑переключатель «добавить / удалить в избранное» для текущего пользователя.
* **Функционал:**
  * Если локация не любима → `POST /rest/v1/favourites { user_id, location_id }`.
  * Иначе → `DELETE /rest/v1/favourites?user_id=eq.{uid}&location_id=eq.{id}`.
  * Оптимистично обновляет `favorites` в Zustand (`toggleFavorite(id)`) и инвалидирует `['favourites', userId]`, `['location', id]`, `['locations']`.
* **Использование:** Вызывается внутри LocationCard при клике на иконку избранное⭐
**Актаульный код useToggleFavourite:** *Ещё не рализован*

> **Библиотеки для UI и анимаций:** Все компоненты стилизуются с помощью Tailwind CSS. Для унифицированного дизайна используются готовые элементы из библиотеки shadcn (Buttons, Inputs, Cards, Modal, Form). Анимации при появлении элементов (загрузка, переходы, появление карточек) реализуются через Framer Motion (например, `motion.div` для плавного фейда или анимирования Skeleton-эффекта).

---